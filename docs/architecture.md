# 系统架构设计

## 总体架构

中长跑实时指导系统采用多层架构设计，包括以下几个主要部分：

1. **数据采集层**：从IMU和足压传感器获取原始数据
2. **信号处理层**：对原始数据进行滤波和特征提取
3. **推理层**：使用轻量级TensorFlow Lite模型在边缘设备上执行推理
4. **应用层**：包括Web界面和用户交互功能

## 核心模块

### 数据采集与预处理

- **传感器接口**：通过USB/蓝牙接收传感器数据
- **数据缓存**：维护一个固定大小的循环缓冲区
- **信号滤波**：低通滤波器去除高频噪声，中值滤波器去除尖峰

### 特征提取

- **时域特征**：均值、方差、最大值、最小值等统计特征
- **频域特征**：使用FFT分析主频率确定步频
- **足压特征**：足压分布、前后足压比例等

### 步态分析模型

- **模型类型**：CNN-BiLSTM混合神经网络
- **输入**：经过特征提取的传感器数据向量
- **输出**：步态相位识别和姿态评分

### Web界面

- **实时仪表盘**：显示当前跑步状态和关键指标
- **历史数据**：展示历史训练记录和趋势
- **深度分析**：提供详细的步态分析和改进建议

## 数据流

1. 传感器采集原始数据 (200Hz采样率)
2. 数据处理器进行滤波和特征提取
3. 特征向量输入推理引擎
4. 推理引擎生成步态相位和评分
5. Web界面展示分析结果和建议

## 部署架构

系统采用边缘计算方式，所有计算均在本地设备上完成：

- 可在支持Python的任何设备上运行
- 前端使用Flask提供Web界面
- 无需云端支持，保证低延迟响应
- 支持离线工作模式

## 系统扩展性

- **模型更新**：支持模型热更新，无需重启系统
- **传感器扩展**：可集成更多类型传感器
- **算法定制**：可根据个人特点定制分析算法